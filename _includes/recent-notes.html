{% comment %}
Include usage:

Default flat list:
  {% include recent-notes.html from="notes" limit=20 %}

Grouped by year:
  {% include recent-notes.html from="notes" limit=20 group_by_year=true %}

For journal:
  {% include recent-notes.html from="journal" group_by_year=true %}
{% endcomment %}

{% assign collection_name = include.from | default: "notes" %}
{% assign limit_count = include.limit | default: 20 %}
{% assign group_years = include.group_by_year | default: false %}

{% assign items = site[collection_name] | sort: "date" | reverse %}

{% if group_years %}

  {%- assign current_year = "" -%}
  <ul class="no-bullets">
    {% for note in items limit: limit_count %}
      {% assign year = note.date | date: "%Y" %}

      {% if year != current_year %}
        {% if current_year != "" %}
          </ul>
        {% endif %}
        <h3>{{ year }}</h3>
        <ul class="no-bullets">
        {% assign current_year = year %}
      {% endif %}

      <li>
        {{ note.date | date: "%m · %d" }} &nbsp;&nbsp;
        <a class="internal-link" href="{{ site.baseurl }}{{ note.url }}">
          {{ note.title }}
        </a>
      </li>

    {% endfor %}
  </ul>

{% else %}

  <ul class="no-bullets">
    {% for note in items limit: limit_count %}
      <li>
        {{ note.date | date: "%Y · %m" }} &nbsp;&nbsp;
        <a class="internal-link" href="{{ site.baseurl }}{{ note.url }}">
          {{ note.title }}
        </a>
      </li>
    {% endfor %}
  </ul>

{% endif %}
